document.addEventListener("DOMContentLoaded",()=>{gsap.registerPlugin(ScrollTrigger);let t=new Lenis,e=(t.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{t.raf(1e3*e)}),gsap.ticker.lagSmoothing(0),document.querySelector("header")),n=document.querySelector(".hero-header"),i=document.querySelector(".hero-img"),r=document.getElementById("canvas-hero"),l=r.getContext("2d");var a=()=>{var e=window.devicePixelRatio||1;r.width=window.innerWidth*e,r.height=window.innerHeight*e,r.style.width=window.innerWidth+"px",r.style.height=window.innerHeight+"px",l.scale(e,e)};a();let g=[],d={frame:0},o=280,s=()=>{--o||(p(),h())};for(let e=0;e<280;e++){var c=new Image;c.onload=s,c.onerror=function(){s.call(this)},c.src=`/assets/images/frame_img/frame_${(e+1).toString()}.jpg`,g.push(c)}let p=()=>{var n=window.innerWidth,i=window.innerHeight,o=(l.clearRect(0,0,n,i),g[d.frame]);if(console.log("Rendering frame "+d.frame,o),o&&o.complete&&0<o.naturalWidth){var s=o.naturalWidth/o.naturalHeight;let e,t,r,a;a=n/i<s?(t=i,e=t*s,r=(n-e)/2,0):(e=n,t=e/s,r=0,(i-t)/2),l.drawImage(o,r,a,e,t)}},h=()=>{ScrollTrigger.create({trigger:".hero",start:"top top",end:`=${7*window.innerHeight}px`,pin:!0,scrub:1,pinSpacing:!0,onUpdate:t=>{var t=t.progress,r=Math.min(t/.6,1),r=Math.round(279*r);if(d.frame=r,p(),t<=.1?(r=1-t/.1,gsap.set(e,{opacity:r})):gsap.set(e,{opacity:0}),t<=.25){r=-500*(t/.25);let e=1;.2<=t&&(a=Math.min((t-.2)/(.25-.2),1),e=1-a),gsap.set(n,{opacity:e,transform:`translate(-50%, -50%) translateZ(${r}px)`})}else gsap.set(n,{opacity:0});if(t<.6)gsap.set(i,{transform:"translateZ(1000px)",opacity:0});else if(.6<=t&&t<=.9){var a=1e3-1e3*((t-.6)/.3);let e=0;e=t<=.8?(t-.6)/.2:1,gsap.set(i,{transform:`translateZ(${a}px)`,opacity:e})}else gsap.set(i,{transform:"translateZ(0px)",opacity:1})}})};window.addEventListener("resize",a),a(),p(),ScrollTrigger.refresh()});